---
title: "R Notebook"
output: html_notebook
---
```{r}
library(dplyr)
library(ggplot2)
library(here)
library(ggrepel)
library(ggridges)
library(viridis)
library(DiagrammeR)

source("R/utils.R")
source("R/plot_utils.R")

#compiled_model = stan_model(file = here("models", "peak_model.stan"))
```

```{r}
data = readRDS(agg_names[1])
print(data)
cor(data$avg_evidence, data$mz_position)
```

```{r}
agg_names = c(
  here("data", "processed", "BTY-1_agg.rds"),
  here("data", "processed", "FY6-1_agg.rds"),
  here("data", "processed", "JFH-1_agg.rds")
)

names = c(
  here("data", "processed", "BTY-1.rds"),
  here("data", "processed", "FY6-1.rds"),
  here("data", "processed", "JFH-1.rds")
)

raw_names = c(
  here("data", "raw", "ST003061", "BTY-1.mzML"),
  here("data", "raw", "ST003061", "FY6-1.mzML"),
  here("data", "raw", "ST003061", "JFH-1.mzML")
)

for (i in 1:3) {
  
  plotMSAgg(agg_names[i])
  plotEvidence(names[i])
  plotPrec(names[i])
  plotAmp(names[i])
}
```
```{r}
readRDS(agg_names[1])
```
